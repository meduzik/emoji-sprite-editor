<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Emoji Sprite Editor</title>
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="stylesheet" href="/src/styles.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/twemoji-colr-font@15.0.3/twemoji.min.css" />
  </head>
  <body>
    <div id="app">
      <div class="left-panel">
        <div class="custom-emoji-section">
          <h3>Custom</h3>
          <div class="custom-input-group">
            <input type="text" id="custom-emoji-input" placeholder="Add..." />
            <button id="add-custom-emoji">+</button>
          </div>
          <div id="custom-emoji-list"></div>
        </div>
        <div class="search-emoji-section">
          <h3>Search</h3>
          <div style="display: flex; gap: 4px; margin-bottom: 4px;">
            <input type="text" id="emoji-search-input" placeholder="Search emojis..." style="flex: 1;" />
            <select id="skin-tone-selector" title="Skin tone">
              <option value="none">‚úã</option>
              <option value="light">‚úãüèª</option>
              <option value="mediumLight">‚úãüèº</option>
              <option value="medium">‚úãüèΩ</option>
              <option value="mediumDark">‚úãüèæ</option>
              <option value="dark">‚úãüèø</option>
            </select>
          </div>
          <div id="emoji-search-results"></div>
        </div>
        <h2>Palette</h2>
        <div id="emoji-palette"></div>
      </div>

      <div class="canvas-container">
        <canvas id="canvas"></canvas>
      </div>

      <div class="right-panel">
        <div class="panel-header">
          <h2>Properties</h2>
          <button id="settings-button" class="help-button" title="Settings">‚öôÔ∏è</button>
          <button id="help-button" class="help-button" title="Help">‚ùì</button>
        </div>
        <div id="property-panel">
          <div class="property-group">
            <label>Text: <input type="text" id="prop-text" /></label>
          </div>
          <div class="property-group">
            <label>X: <input type="number" id="prop-x" step="1" /></label>
            <label>Y: <input type="number" id="prop-y" step="1" /></label>
          </div>
          <div class="property-group">
            <label>Rotation: <input type="number" id="prop-rotation" step="1" /></label>
          </div>
          <div class="property-group">
            <label>Scale X: <input type="number" id="prop-scaleX" step="0.1" min="0.1" /></label>
            <label>Scale Y: <input type="number" id="prop-scaleY" step="0.1" min="0.1" /></label>
          </div>
          <div class="layer-controls">
            <h3>Layer Order</h3>
            <div class="button-group">
              <button id="layer-front" title="To Front">‚¨ÜÔ∏è‚¨ÜÔ∏è</button>
              <button id="layer-forward" title="Forward">‚¨ÜÔ∏è</button>
            </div>
            <div class="button-group">
              <button id="layer-back" title="To Back">‚¨áÔ∏è‚¨áÔ∏è</button>
              <button id="layer-backward" title="Backward">‚¨áÔ∏è</button>
            </div>
            <div class="button-group">
              <button id="delete-sprite" class="delete-button">Delete</button>
            </div>
          </div>
        </div>

        <div class="button-group" style="padding: 8px 0;">
          <button id="clear-canvas">Clear</button>
        </div>

        <div class="export-section">
          <h3>Export/Import</h3>
          <textarea id="json-data" placeholder="JSON data..." rows="3"></textarea>
          <div class="button-group">
            <button id="export-json">Export</button>
            <button id="import-json">Import</button>
          </div>
          <div class="button-group">
            <button id="import-clipboard">Import Clipboard</button>
          </div>
          <div class="button-group">
            <button id="export-png">Export PNG...</button>
          </div>
        </div>
      </div>
    </div>

    <div id="help-modal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>How to Use</h2>
          <button id="close-help" class="close-button">‚úï</button>
        </div>
        <div class="modal-body">
          <h3>Controls</h3>
          <ul>
            <li>Right click emoji to add or remove favorites.</li>
          </ul>
        </div>
      </div>
    </div>

    <div id="export-modal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Export PNG</h2>
          <button id="close-export" class="close-button">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="control-group">
            <label for="export-scale">Scale (pixels per unit)</label>
            <input type="number" id="export-scale" min="1" max="1000" step="1" value="80">
          </div>
          <div class="control-group">
            <label>
              <input type="checkbox" id="export-crop" checked>
              Crop to content (removes centered origin)
            </label>
          </div>
          <div class="control-group">
            <label>
              <input type="checkbox" id="export-border" checked>
              Add 1px transparent border
            </label>
          </div>
          <div class="button-group">
            <button id="export-png-confirm">Export</button>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-modal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Settings</h2>
          <button id="close-settings" class="close-button">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="control-group">
            <h3>View Options</h3>
            <label>
              <input type="checkbox" id="settings-show-origin" checked>
              Guides
            </label>
            <label>
              <input type="checkbox" id="settings-axes-on-top">
              Axes on top
            </label>
            <label>
              <input type="checkbox" id="settings-border-on-top">
              Border on top
            </label>
          </div>
          <div class="control-group">
            <h3>Font</h3>
            <label for="settings-font">Font family or URL</label>
            <textarea id="settings-font" rows="3" placeholder="Arial&#10;@googlefont:Noto Color Emoji&#10;https://example.com/font.woff2"></textarea>
            <small style="display: block; margin-top: 4px; color: #888;">
              Enter a font family name, @googlefont:Name for Google Fonts, or a URL starting with "http"
              <br>
              <a href="#" id="use-noto-color-emoji" style="color: #4fc3f7; text-decoration: none;">Use Noto Color Emoji</a> | <a href="#" id="use-openmoji" style="color: #4fc3f7; text-decoration: none;">Use OpenMoji</a> | <a href="#" id="use-twemoji" style="color: #4fc3f7; text-decoration: none;">Use Twemoji</a>
            </small>
            <button id="settings-font-apply" style="margin-top: 8px;">Apply Font</button>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
